

html, body {
  height: 100%;
}

body {
  background: linear-gradient(#fff, #999);
  perspective: 1000px;
}

#book {
  transform-style: preserve-3d;
  transform: rotateX(45deg) rotateY(1deg) rotateZ(1deg);
  position: relative;
  margin: 300px auto;
  width: 600px;
  .page {
    width: 300px;
    height: 300px;
    position: absolute;
    transform-style: preserve-3d;
    transform-origin: right center;
    transition-property: transform;
    transition-timing-function: ease-in;
    transition-duration: 1s;
    .popup {
      position: absolute;
      transform-style: preserve-3d;
      transform-origin: bottom center;
      transition-timing-function: ease-in;
      transition-duration: 1s;
    }
    .popup_a {
      height: 120px;
      width: 80px;
      transform: rotateX(-90deg);
      &.hide {
        transform: rotateX(-1deg);  
      }
    }
    .popup_b {
      height: 100px;
      width: 60px;
      transform: rotateX(90deg);
      &.hide {
        transform: rotateX(1deg);  
      }
    }
  }
}

#page_1 {
  background-color: blue;
}

#page_2 {
  background-color: green;
  transform: rotateY(177deg);
  z-index: 60;
  &.flip {
    transform: rotateY(1deg);
  }
}

#page_3 {
  background-color: red;
  transform: rotateY(178deg);
  z-index: 50;
  &.flip {
    transform: rotateY(2deg);
  }
}

#page_4 {
  background-color: purple;
  transform: rotateY(179deg);
  z-index: 40;
  &.flip {
    transform: rotateY(3deg);
  }
}

#page_5 {
  background-color: blue;
  transform: rotateY(180deg);
  z-index: 30;
}

#popup_1 {
  background-color: orange;
  left: -10px;
  top: 100px;
}

#popup_2 {
  background-color: brown;
  left: 30px;
  top: 130px;
}

#popup_2_b {
  background-color: purple;
  left: 120px;
  top: 100px;
}

#popup_3 {
  background-color: teal;
  left: 120px;
  top: 60px;
}

#popup_3_b {
  background-color: yellow;
  left: 180px;
  top: 150px;
}

#popup_4 {
  background-color: yellow;
  left: 100px;
  top: 100px;
}

#popup_4_b {
  background-color: orange;
  left: 60px;
  top: 80px;
}

#popup_5_b {
  background-color: teal;
  left: 30px;
  top: 180px;
}